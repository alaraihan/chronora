<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile | Chronora</title>
  <link rel="stylesheet" href="/css/user/profile-shared.css">
  <link rel="stylesheet" href="/css/user/profile.css">
</head>

<body>

  <%- include('../partials/user/header') %>

    <div class="profile-layout">
      <%- include('../partials/user/sidebar') %>

        <main class="profile-content">
          <header class="page-title-header">
            <h1>My Profile</h1>
            <p class="subtitle">Manage your personal information</p>
          </header>
          <div class="profile-card card">
            <div class="profile-field image-field">
              <div class="image-wrapper">
                <img src="<%= user.profileImage ? user.profileImage : '/images/default.png' %>" alt="Profile Image"
                  class="profile-img">
              </div>
              <a href="/profile/edit/image" class="btn btn-outline edit-btn">Change Photo</a>
            </div>

            <div class="profile-field">
              <span class="field-label">Full Name</span>
              <p class="field-value">
                <%= user.fullName %>
              </p>
              <a href="/profile/edit/name" class="btn btn-outline edit-btn">Edit</a>
            </div>

            <div class="profile-field">
              <span class="field-label">Email Address</span>
              <p class="field-value">
                <%= user.email %>
                  <% if (user.googleId) { %>
                    <span class="google-badge">
                      <i class="bi bi-google"></i> Google Account
                    </span>
                    <% } %>
              </p>
              <!-- Only show edit email button for non-Google users -->
              <% if (!user.googleId) { %>
                <a href="/profile/edit/email" class="btn btn-outline edit-btn">Edit</a>
                <% } %>
            </div>

            <!-- Add a message for Google users about password -->
            <% if (user.googleId) { %>
              <div class="profile-field" style="border-top: 1px dashed rgba(255,255,255,0.055); padding-top: 15px;">
                <div class="google-info-message">
                  <i class="bi bi-google"></i>
                  <span>You're signed in with Google. Password management is handled by Google.</span>
                </div>
              </div>
              <% } %>
          </div>
        </main>
    </div>

</body>

</html>